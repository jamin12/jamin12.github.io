---
layout: post
title: "raw 데이터 조회속도 개선"
date: 2025-12-12 14:00:00 +0900
categories: [트러블 슈팅]
tags: [커버링 인덱스, 페이징 처리]
---

## 너무 느린 데이터 조회 속도

원래 설정된 기간의 조건에 맞는 데이터를 모두 가져오고 프론트에서 30개씩 랜더링 하는 방식으로 구현 했었다.

![image](/assets/imgs/posts/raw 데이터 조회/image1.png)

위 그림처럼 20초를 기다려야지 데이터가 나오게 되고

데이터가 너무 많아서 브라우저가 멈추는 현상까지 나오게 되었다.

## 페이징 처리

![image](/assets/imgs/posts/raw 데이터 조회/image2.png)

우리 회사에서 사용하는 일반적인 페이징 처리이다.

![image](/assets/imgs/posts/raw 데이터 조회/image3.png)

이렇게 사용하는 쿼리는 위 그림 처럼 성능 문제가 있는데

페이징을 한다고 바로 원하는 row로 가는게 아니고 앞전에 검색했던 모든 row와 검색해야하는 row를 전부 검색하고 필요한것을 제외하고 다 버리기 때문에 페이지가 뒤로 가면 갈수록 조회 속도가 느려진다는 것이다.

## 커버링 인덱스

커버링 인덱스란 **쿼리를 충족시키는 데 필요한 모든 데이터를 갖고 있는 인덱스이다.**

즉, select, where, order by, limit, group by 등에서 **사용되는 모든 컬럼이 Index 컬럼**안에 다 포함 되어야 한다.

select절을 비롯해 order by, where 등 쿼리 내 모든 항목이**인덱스 컬럼으로만** 이루어지게 하여

**인덱스 내부에서 쿼리가 완성**이렇게 커버링 인덱스로 빠르게 걸러낸 row의 id를 통해

**실제 select 절의 항목들을 빠르게 조회 한다.**

![image](/assets/imgs/posts/raw 데이터 조회/image4.png)

## 결과

총 데이터 개수 : 2천만

|   | 전체조회 | 페이징 | 커버링 인덱스 페이징 |
| --- | --- | --- | --- |
| 시간 | 20s | 7.8s | 2.9s |
| 개선률 | 0% | 전체 조회 → 페이징 60% | 페이징 → 커버링 인덱스 페이징: 62.8% 전체 조회 → 커버링 인덱스 페이징 : 85.5% |

결과적으로 총 85%정도의 성능 개선을 이루어 낼 수 있었다.

## 참고

[https://jojoldu.tistory.com/529?category=637935](https://jojoldu.tistory.com/529?category=637935)