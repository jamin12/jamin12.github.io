---
layout: post
title: "Poc 및 피드백"
date: 2025-12-24
categories: [기타, 러너스하이2, 주제1]
tags: [cdc, 러너스하이2_주제1]
---

그동안 진행했던 Pact 기반 PoC 결과를 팀원들에게 공유했다. CDC(Consumer-Driven Contracts)라는 개념 자체가 팀 내에서는 생소했다.

대신 지금까지 우리가 실제로 겪어왔던 문제, 특히 서버 간 의존성이 늘어나면서 발생했던 API 변경 이슈와 그로 인한 장애 사례를 먼저 정리했다. 스펙 변경이 있었지만 사전에 감지하지 못했고, 배포 이후에야 문제를 인지했던 경험들, 그리고 그 과정에서 불필요하게 소모됐던 커뮤니케이션 비용과 대응 시간에 초점을 맞췄다. 그 위에 CDC가 어떤 관점에서 이 문제를 다루는지, 그리고 Pact가 그 개념을 어떻게 구현하는 도구인지 차례대로 설명했다.

공유는 세미나에 가까운 형식으로 진행했다. Consumer가 기대하는 계약을 먼저 정의하고, Producer가 이를 검증하는 흐름이 기존의 “서버 간 합의”나 “문서 기반 커뮤니케이션”과 어떻게 다른지 설명했다. 이후 세부적으로 Consumer의 내부 동작 흐름, provider의 동작 흐름을 설명했고 PoC에서는 실제로 Feign 기반 Consumer 테스트에서 Pact 파일을 생성하고, Provider 테스트에서 이를 검증하는 최소 단위 흐름을 보여주었다.

## 공유 및 피드백

팀원들 대부분은 그동안 API 변경으로 인한 장애나 사후 대응에 대해 공통적인 피로감을 느끼고 있었다. 특히 변경 사항이 작아 보여도 실제 영향 범위를 예측하기 어려웠고, 결국 사람이 직접 확인하거나 메신저로 서로 물어보는 방식에 의존해왔다는 점에 불편함이 있었다. 모든 팀원이 배포 전에 시스템적으로 문제를 차단하는 시스템적인 해결책이 필요하다는 공감을 했다.

논의 과정에서는 기술적인 흥미보다 “이걸 실제로 어떻게 가져갈 수 있을지”에 대한 현실적인 이야기들이 많이 나왔다. 공유 중 정리된 주요 피드백과 논의 사항은 다음과 같았다.

- **일정 조정**
  현재 개발 이슈 대응, 다른 우선순위가 높은 작업들이 겹쳐 있는 상황이라 당장 적용하기는 부담이 있다는 의견이 많았다. 그 결과, PoC 단계에서 바로 적용하기보다는 내년 1월부터 단계적으로 적용 여부를 검토하는 방향으로 정리됐다.

- **Pact Broker 도입 여부**
  단순히 `pact` 파일을 Consumer와 Producer 간에 직접 주고받는 방식은 장기적으로 관리 포인트가 늘어날 수 있다는 지적이 있었다. 파일 버전 관리, 최신 계약 여부, 여러 Consumer가 존재하는 상황에서의 동기화 문제를 고려하면, 중앙 저장소 역할을 하는 Pact Broker를 도입하는 편이 구조적으로 더 안정적일 것이라는 의견이 나왔다.

- **Gradle 빌드 순서 문제**
  Consumer 테스트 → Pact 생성 → Producer 검증이라는 흐름을 빌드 레벨에서 어떻게 보장할 것인지가 과제로 남았다. 단순히 문서로 순서를 정하는 것이 아니라, Gradle Task 의존성으로 강제하지 않으면 결국 사람의 실수로 빠질 수 있다는 점이 지적됐다.

- **CI/CD 연동 필요성**
  로컬에서 테스트를 돌려보는 수준에 머무르면 실효성이 떨어진다는 의견이 있었다. Jenkins나 GitHub Actions 파이프라인에 계약 검증을 포함시키고, Pact 검증이 실패하면 빌드나 배포 자체가 중단되는 구조가 되어야 의미가 있다는 의견이 나왔다.

## 향후 계획

현재 내 일정상으로도 개발과 다른 과제들이 쌓여 있어, 바로 속도를 내기는 어려운 상황이다. 다만 논의가 한 번으로 끝나지 않도록, 1월에 바로 적용을 시작할 수 있는 최소한의 베이스는 미리 준비해둘 계획이다.

구체적으로는 Pact Broker 연동 구조를 어떻게 가져갈지, 기존 Gradle 빌드와 CI 파이프라인에 어떤 식으로 녹일 수 있을지를 정리해두는 것을 목표로 한다. 이 단계에서는 거창한 자동화나 확장보다는, 메인 브랜치에 안전하게 포함시킬 수 있는 수준을 1차 목표로 잡고 있다. 실제 서비스에 부담을 주지 않으면서도, 계약 기반 검증을 도입하기 위한 발판을 마련하는 정도면 충분하다고 판단했다.
