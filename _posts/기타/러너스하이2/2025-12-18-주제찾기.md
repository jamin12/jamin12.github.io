---
layout: post
title: "주제 선정"
date: 2025-12-18 14:20:00 +0900
categories: [기타, 러너스하이2]
tags: [cdc]
---

## 문제를 인식하게 된 계기

우리 서비스는 MSA 구조로 구성되어 있다.  
서버가 나뉘어 있다 보니 서버 A의 API를 서버 B에서 사용하는 상황이 자주 발생한다.

처음에는 별다른 문제 없이 잘 동작하고 있었다.  
API도 정상적으로 맞았고, 기능도 의도한 대로 동작했다.  
이 시점에서는 API 변경에 대해 크게 신경 쓰지 않았다.

문제가 처음 드러난 것은 머지 과정이었다.

---

## 머지 이후 발생한 오류

서버 A에서 머지가 진행되었고,  
그 과정에서 API 스펙이 이전 상태로 변경되었다.

이후 서버 B에서 에러가 발생했다.  
문제는 에러 자체보다도 원인을 찾는 과정이었다.

- 서버 B에는 큰 코드 변경이 없었다
- 전날까지 정상 동작하던 기능이었다
- 로그만으로는 명확한 원인을 알기 어려웠다

확인 끝에 원인은 서버 A의 API 변경이었다.  
API를 다시 맞추자 서버 B의 에러는 바로 해결되었다.

이때까지만 해도 일회성 문제라고 생각했다.

---

## 같은 문제가 반복되었다

이후 비슷한 상황이 다시 발생했다.  
이번에는 서버 A의 API를 다른 사람이 변경하는 경우였다.

API가 변경되었고,  
그 영향을 받은 서버에서 에러가 발생했다.

이 과정에서 더 큰 문제가 드러났다.

- 해당 API를 **어디 서버에서 사용하고 있는지 알 수 없었다**
- 변경 전에 영향을 받는 대상이 보이지 않았다
- 결국 변경 후에야 문제가 드러나는 구조였다

그래서 다음과 같은 상황이 반복되었다.

- API를 변경하기 전에 일일이 물어본다
- 코드를 검색해서 사용하는 곳을 찾는다
- 그냥 변경하고, 에러가 나면 되돌린다

이 방식은 계속해서 불안정한 상태를 만들고 있었다.

---

## 문제의 본질

이 문제는 특정 사람의 실수로 보기 어려웠다.  
API를 변경한 사람도, 사용하는 사람도 잘못은 없었다.

문제는 구조에 있었다.

- API 변경이 어디에 영향을 주는지 알 수 없다
- 서버 간 명확한 계약이 존재하지 않는다
- 변경을 사전에 검증하거나 감지할 수 있는 장치가 없다

즉,  
에러는 항상 **변경 이후에야 알 수 있는 구조**였다.

---

## 이 주제를 다뤄야겠다고 판단한 이유

이 경험을 반복하면서 생각이 바뀌었다.

에러를 빠르게 고치는 것보다  
에러가 발생하지 않게 만드는 구조가 필요하다고 느꼈다.

그래서 다음과 같은 질문을 정리하게 되었다.

- 서버 간 API를 어떻게 계약으로 관리할 수 있을까
- API 변경을 사전에 인지할 수 있는 방법은 없을까
- 사람이 기억하거나 커뮤니케이션에 의존하지 않는 구조는 만들 수 없을까

이 글은 그 고민의 출발점이다.  
아직 해결 방법이나 결과는 없다.

다만,  
이 문제는 우연히 발생한 이슈가 아니라  
MSA 구조에서 반복적으로 나타날 수 있는 문제라고 판단했고,  
그래서 직접 다뤄볼 주제로 선택하게 되었다.
