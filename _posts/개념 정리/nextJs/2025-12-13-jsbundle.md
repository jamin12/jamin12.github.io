---
layout: post
title: "Next.js에서 말하는 “JS bundle”란 무엇인가"
date: 2025-12-13 14:00:00 +0900
categories: [개념 정리, nextJs]
tags: [Next.js, jsbundle]
---

## 1. JS bundle은 언제 필요해지는가

Next.js에서 서버는 HTML을 만들어서 브라우저로 보낸다.
이 시점까지만 보면 이렇게 생각하기 쉽다.

> “이미 HTML이 있는데,
> 굳이 JS를 또 내려보낼 이유가 있나?”

실제로 **화면을 보여주는 것만** 목적이라면
JS bundle은 필요 없다.

하지만 화면이:

* 클릭에 반응하고
* 상태가 바뀌고
* 다시 렌더링되어야 한다면

그 순간부터 **HTML만으로는 부족해진다**.

## 2. JS bundle을 역할 기준으로 정의하면

JS bundle을 이렇게 정리하는 게 가장 이해가 잘 됐다.

> **JS bundle은
> 브라우저에서 실행되어
> HTML에 “동작과 상태”를 부여하는 코드 묶음이다.**

즉:

* HTML은 결과물이고
* JS bundle은 그 결과물을 **다시 React 앱으로 복원하는 실행 코드**

에 가깝다.

## 3. 왜 “bundle(묶음)”이라는 표현을 쓰는가

Next.js 프로젝트에는 수많은 파일이 있다.

```txt
page.tsx
Button.tsx
Counter.tsx
useAuth.ts
```

하지만 브라우저는:

* 이런 파일 구조를 모르고
* React 컴포넌트 개념도 모르고
* `tsx` 문법도 이해하지 못한다

그래서 Next.js는 빌드 시점에:

* 브라우저에서 실행돼야 할 코드만 골라서
* 의존성을 따라 모아서
* **하나 또는 여러 개의 JS 파일로 묶는다**

이 결과가 **JS bundle**이다.

## 4. 어떤 코드가 JS bundle에 들어가는가

여기서 기준은 굉장히 명확하다.

> **브라우저에서 실행돼야 하면 들어가고,
> 서버에서만 실행되면 들어가지 않는다.**

### 들어가는 것

* Client Component
* 상태(`useState`)
* 이벤트 핸들러
* 브라우저에서 실행되는 `fetch`
* 라우팅 로직

### 들어가지 않는 것

* Server Component
* 서버에서 실행되는 `fetch`
* DB 접근
* 서버 전용 설정 값

이 기준으로 보면
이전에 했던 질문들이 전부 연결된다.

## 5. `"use client"` 한 줄이 의미하는 것

```tsx
"use client";
```

이 한 줄은 선언에 가깝다.

> “이 파일 안의 코드는
> 브라우저에서 실행될 것이다.”

그래서 이 파일 안에 있는:

* 컴포넌트
* fetch 로직
* 상태 처리

전부 **JS bundle에 포함**된다.

반대로 `"use client"`가 없으면:

* 서버에서 실행되고
* HTML만 남기고
* JS bundle에는 포함되지 않는다.

## 6. Server Component에 JS bundle이 없는 이유

```tsx
export default async function Page() {
  const data = await fetch("http://api/projects");
  return <ul>{/* ... */}</ul>;
}
```

이 코드는:

* 서버에서 실행되고
* HTML을 계산한 뒤
* 결과만 브라우저로 보낸다

브라우저 입장에서는:

* 이미 완성된 HTML을 받았고
* 이 화면을 다시 계산할 필요가 없다

그래서:

* 이 컴포넌트의 로직은
* JS bundle에 포함되지 않는다

JS bundle은 **다시 실행할 필요가 있을 때만 존재한다**.

## 7. JS bundle과 hydration의 관계

JS bundle은 단독으로 의미를 가지지 않는다.
항상 **hydration**과 함께 동작한다.

흐름을 정리하면 이렇다.

1. 서버가 HTML을 보낸다
2. 브라우저가 화면을 그린다
3. JS bundle이 로드된다
4. React가 실행된다
5. HTML과 컴포넌트가 연결된다

이 과정이 끝나야:

* 이벤트가 동작하고
* 상태가 유지되고
* 화면이 “인터랙티브”해진다

## 8. 왜 JS bundle을 줄이려고 하는가

JS bundle이 커질수록:

* 다운로드가 느려지고
* 파싱 비용이 커지고
* hydration이 늦어진다

그래서 Next.js는:

* Server Component를 기본으로 두고
* Client Component를 필요한 곳에만 사용하게 설계됐다

즉, 목표는 단순하다.

> **JS bundle은 꼭 필요한 만큼만 보내자.**

## 9. 이 시점에서 정리한 JS bundle 한 문장

> **JS bundle은
> 서버에서 HTML을 만들기 위한 코드가 아니라,
> 브라우저에서 HTML을 다시 “실행 가능한 앱”으로 만들기 위한 코드다.**

이렇게 정리하고 나니:

* 컴포넌트가 왜 실행 단위인지
* `"use client"`가 왜 중요한지
* 서버와 브라우저 역할이 왜 나뉘는지

전부 같은 선상에서 이해됐다.
