---
layout: post
title: "프로세스와 유휴 프로세스"
date: 2026-01-16
categories: [개념 정리, cs]
tags: [운영체제, 프로세스]
---

작업 관리자에서 "System Idle Process"가 CPU를 90% 이상 사용하고 있는 것을 본 적이 있었다. 컴퓨터가 한가한 상태인데 어떤 프로세스가 CPU를 그렇게 많이 쓴다는 게 이상했다.

## 유휴 프로세스의 목적

유휴 프로세스는 코드 단순화를 위해 존재한다고 한다. 스케줄러가 실행할 프로세스를 선택할 때마다 "대기열이 비었나?"를 체크하는 분기 처리를 넣는 대신, 항상 대기열에 무언가가 있도록 만든 것이다. 예외 상황을 줄이면 코드가 단순해지고 버그도 줄어든다.

유휴 프로세스가 실행될 때는 실제로 할 일이 없으므로, `halt` 명령어를 실행해서 CPU를 쉬게 한다. 절전 효과는 부가적인 이점이다.

## 유휴 프로세스가 실행되는 방식

유휴 프로세스도 일반 프로세스처럼 실제로 CPU에서 실행된다. 다만 하는 일이 다르다.

```c
while(true) {
    halt;  // CPU를 대기 상태로
}
```

작업 관리자에서 유휴 프로세스의 CPU 사용률이 90%라는 것은, CPU가 90%의 시간 동안 할 일이 없어서 쉬고 있다는 의미다. 사용률이 높을수록 컴퓨터가 한가하다는 역설적인 상황이다.

## 프로세스 상태와 대기

- **실행 중(Running)**: CPU에서 코드를 실행하고 있음
- **준비 완료(Ready)**: 실행할 준비가 되어 있고, CPU 할당만 기다림
- **대기(Waiting/Blocked)**: 외부 이벤트를 기다림 (입력, 파일 읽기, 네트워크 응답 등)

메모장을 켜놓고 아무것도 입력하지 않으면 메모장 프로세스는 대기 상태다. 키보드 입력이 발생하면 운영체제가 이 프로세스를 준비 완료 상태로 바꿔서 대기열에 넣고, 스케줄러가 CPU를 할당한다.

컴퓨터에 프로세스가 100개 있어도 대부분은 대기 상태로 무언가를 기다리고 있고, 준비 완료 대기열에 있는 프로세스는 몇 개 되지 않는다.

## 모든 프로세스가 대기 중일 때

모든 프로세스가 대기 상태에 들어가면 준비 완료 대기열이 빈다. 이때 유휴 프로세스가 실행된다. 유휴 프로세스는 항상 준비 완료 상태로 대기열에 남아 있기 때문에, 스케줄러는 항상 실행할 무언가를 찾을 수 있다.

## 대기 중인 프로세스의 CPU 사용

대기 상태인 프로세스는 CPU를 전혀 사용하지 않는다고 한다. "나중에 필요하면 불러줘" 하고 CPU를 완전히 놓는 것이다. CPU를 사용하는 것은 오직 실행 중 상태일 때만이다.

프로세스의 CPU 사용 흐름:

1. 메모장이 대기 상태 (CPU 사용 0%)
2. 키보드 입력 발생 → 준비 완료 상태로 전환
3. 스케줄러가 실행 상태로 전환 → 이때만 CPU 사용
4. 입력 처리 완료 → 다시 대기 상태 (CPU 사용 0%)

이 과정이 매우 빠르게 반복되어서 작업 관리자에서는 "CPU 0.1%" 같은 낮은 수치로 보인다. 잠깐 깨어나서 일하고 다시 자는 패턴이다.
